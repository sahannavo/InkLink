# =============================================
# SERVER CONFIGURATION - ADD THIS SECTION
# =============================================
server.port=8081
server.servlet.session.timeout=30m

# =============================================
# DATABASE CONFIGURATION
# =============================================
spring.datasource.driverClassName=org.h2.Driver

# Let Hibernate create tables automatically
spring.jpa.defer-datasource-initialization=true
# File: src/main/resources/application.properties
spring.profiles.active=dev

# H2 in-memory (development)
spring.datasource.url=jdbc:h2:mem:inklinkdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.hibernate.ddl-auto=update
spring.h2.console.enabled=true

# File upload
file.upload-dir=uploads

# Mail (dev - use a disabled or mock SMTP server)
mail.host=localhost
mail.port=1025
mail.username=
mail.password=
mail.from=no-reply@inklink.local
# Don't run schema.sql - it conflicts with Hibernate
# spring.sql.init.mode=always
# spring.sql.init.schema-locations=classpath:schema.sql

# =============================================
# JPA/HIBERNATE CONFIGURATION
# =============================================
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# =============================================
# RATE LIMITING CONFIGURATION
# =============================================
app.rate-limit.requests-per-minute=100
app.rate-limit.upload-requests-per-minute=20

# =============================================
# SECURITY ENHANCEMENTS
# =============================================
app.security.remember-me.key=inklink-remember-me-key-2025
app.security.remember-me.token-validity-seconds=1209600
app.security.password.encoder.strength=12

# =============================================
# ANALYTICS CONFIGURATION
# =============================================
app.analytics.enabled=true
app.analytics.retention-days=90

# =============================================
# STORY ENHANCEMENTS
# =============================================
app.story.related-stories.limit=5
app.story.trending.time-window-days=7
app.story.excerpt.max-length=255

# =============================================
# CACHE CONFIGURATION
# =============================================
spring.cache.type=simple
spring.cache.cache-names=stories,users,categories
spring.cache.simple.time-to-live=300000

# =============================================
# PERFORMANCE OPTIMIZATIONS
# =============================================
spring.servlet.multipart.max-file-size=2MB
spring.servlet.multipart.max-request-size=2MB
spring.servlet.multipart.file-size-threshold=2KB

# =============================================
# H2 CONSOLE (Development only)
# =============================================
spring.h2.console.path=/h2-console

# =============================================
# NOTIFICATION SETTINGS
# =============================================
app.notifications.retention-days=30
app.notifications.batch-size=1000
app.notifications.enabled=true

# =============================================
# COMMENT SETTINGS
# =============================================
app.comments.max-length=1000
app.comments.allow-replies=true
app.comments.auto-approve=true

# =============================================
# ASYNC CONFIGURATION FOR NOTIFICATIONS
# =============================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100
spring.task.scheduling.pool.size=5